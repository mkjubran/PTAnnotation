{"ast":null,"code":"import'../App.css';import React,{useEffect,useState}from\"react\";import axios from'axios';import SecureVideoPlayer from\"./SecureVideoPlayer\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function VideoAnnotator(_ref){let{user}=_ref;const[exercises,setExercises]=useState([]);const[exercise,setExercise]=useState(\"\");const[videos,setVideos]=useState([]);const[video,setVideo]=useState(\"\");const[labelNames,setLabelNames]=useState([]);// Q1–Q10 from DB\nconst[labels,setLabels]=useState([]);// user-selected values\nuseEffect(()=>{axios.get(\"/api/annotations\").then(res=>{// The keys are \"E0\", \"E1\", etc.\nsetExercises(Object.keys(res.data));});},[]);useEffect(()=>{if(exercise){axios.get(\"/api/videos/\".concat(exercise)).then(res=>{setVideos(res.data);setVideo(res.data[0]||\"\");});}},[exercise]);// Fetch label names from DB\nuseEffect(()=>{axios.get(\"/api/labels\").then(res=>{setLabelNames(res.data);setLabels(new Array(res.data.length).fill(5));// Default values\n});},[]);const handleLabelChange=(idx,val)=>{const newLabels=[...labels];newLabels[idx]=Number(val);setLabels(newLabels);};const handleSubmit=()=>{axios.post(\"http://pt-backend:5000/annotations\",{exercise,video,user,labels}).then(()=>alert(\"Annotation saved!\"));};return/*#__PURE__*/_jsxs(\"div\",{style:styles.container,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Exercise:\"}),/*#__PURE__*/_jsxs(\"select\",{onChange:e=>setExercise(e.target.value),value:exercise,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select exercise\"}),exercises.map(ex=>/*#__PURE__*/_jsx(\"option\",{value:ex,children:ex},ex))]}),/*#__PURE__*/_jsx(\"h3\",{children:\"Video:\"}),/*#__PURE__*/_jsx(\"select\",{onChange:e=>setVideo(e.target.value),value:video,children:videos.map(v=>/*#__PURE__*/_jsx(\"option\",{value:v,children:v},v))})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",justifyContent:\"center\",alignItems:\"center\"},children:video&&exercise&&/*#__PURE__*/_jsx(SecureVideoPlayer,{exercise:exercise,video:video})}),/*#__PURE__*/_jsxs(\"div\",{style:{overflowY:\"auto\",padding:\"0 10px\"},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Labels:\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Taking into account the description and aim of the exercise and observing the whole exercise (all repetitions), please answer the questions choosing one of the following options:\",/*#__PURE__*/_jsx(\"br\",{}),\"1 = Never \\xA0 2 = Rarely \\xA0 3 = Sometimes \\xA0 4 = Often \\xA0 5 = Always\"]}),labelNames.map((label,idx)=>/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:\"1rem\"},children:[/*#__PURE__*/_jsxs(\"p\",{className:\"question-text\",children:[label.name,\": \",label.question]}),/*#__PURE__*/_jsx(\"input\",{type:\"range\",min:\"0\",max:\"5\",value:labels[idx]||0,onChange:e=>handleLabelChange(idx,e.target.value)}),\" \",labels[idx]||0]},idx)),/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,children:\"Save Annotation\"})]})]});}const styles={container:{height:\"100vh\",display:\"grid\",gridTemplateColumns:\"20% 40% 40%\",// Left, Middle, Right\ngap:\"1rem\",background:\"#e8efff\",padding:\"3rem\",fontSize:\"1.1rem\"// ⬅ sets base font size for everything\n},form:{background:\"#fff\",padding:\"2rem\",borderRadius:\"10px\",boxShadow:\"0 4px 20px rgba(0,0,0,0.1)\",width:\"300px\",display:\"flex\",flexDirection:\"column\"},title:{textAlign:\"center\",marginBottom:\"1.5rem\",color:\"#1f2937\"},label:{marginBottom:\"0.25rem\",color:\"#1f2937\",fontWeight:\"500\"},input:{marginBottom:\"1rem\",padding:\"0.5rem\",borderRadius:\"5px\",border:\"1px solid #d1d5db\",fontSize:\"1rem\"},button:{background:\"#3b82f6\",color:\"#fff\",padding:\"0.75rem\",border:\"none\",borderRadius:\"5px\",cursor:\"pointer\",fontSize:\"1rem\"}};export default VideoAnnotator;","map":{"version":3,"names":["React","useEffect","useState","axios","SecureVideoPlayer","jsx","_jsx","jsxs","_jsxs","VideoAnnotator","_ref","user","exercises","setExercises","exercise","setExercise","videos","setVideos","video","setVideo","labelNames","setLabelNames","labels","setLabels","get","then","res","Object","keys","data","concat","Array","length","fill","handleLabelChange","idx","val","newLabels","Number","handleSubmit","post","alert","style","styles","container","children","onChange","e","target","value","map","ex","v","display","justifyContent","alignItems","overflowY","padding","label","marginBottom","className","name","question","type","min","max","onClick","height","gridTemplateColumns","gap","background","fontSize","form","borderRadius","boxShadow","width","flexDirection","title","textAlign","color","fontWeight","input","border","button","cursor"],"sources":["/AIARUPD/DataAnnotationApp/pt-annotation-app/frontend/src/components/VideoAnnotator.js"],"sourcesContent":["import '../App.css';\nimport React, { useEffect, useState } from \"react\";\nimport axios from 'axios';\nimport SecureVideoPlayer from \"./SecureVideoPlayer\";\n\nfunction VideoAnnotator({ user }) {\n  const [exercises, setExercises] = useState([]);\n  const [exercise, setExercise] = useState(\"\");\n  const [videos, setVideos] = useState([]);\n  const [video, setVideo] = useState(\"\");\n  const [labelNames, setLabelNames] = useState([]); // Q1–Q10 from DB\n  const [labels, setLabels] = useState([]); // user-selected values\n\n  useEffect(() => {\n    axios.get(\"/api/annotations\").then((res) => {\n      // The keys are \"E0\", \"E1\", etc.\n      setExercises(Object.keys(res.data));\n    });\n  }, []);\n\n  useEffect(() => {\n    if (exercise) {\n      axios.get(`/api/videos/${exercise}`).then((res) => {\n        setVideos(res.data);\n        setVideo(res.data[0] || \"\");\n      });\n   }\n  }, [exercise]);\n\n  // Fetch label names from DB\n  useEffect(() => {\n    axios.get(\"/api/labels\").then((res) => {\n      setLabelNames(res.data);\n      setLabels(new Array(res.data.length).fill(5)); // Default values\n    });\n  }, []);\n\n  const handleLabelChange = (idx, val) => {\n    const newLabels = [...labels];\n    newLabels[idx] = Number(val);\n    setLabels(newLabels);\n  };\n\n  const handleSubmit = () => {\n    axios.post(\"http://pt-backend:5000/annotations\", {\n      exercise,\n      video,\n      user,\n      labels\n    }).then(() => alert(\"Annotation saved!\"));\n  };\n\nreturn (\n  <div style={styles.container}>\n\n    {/* Left column */}\n    <div>\n      <h3>Exercise:</h3>\n      <select onChange={(e) => setExercise(e.target.value)} value={exercise}>\n        <option value=\"\">Select exercise</option>\n        {exercises.map((ex) => (\n          <option key={ex} value={ex}>{ex}</option>\n        ))}\n      </select>\n\n      <h3>Video:</h3>\n      <select onChange={(e) => setVideo(e.target.value)} value={video}>\n        {videos.map((v) => (\n          <option key={v} value={v}>{v}</option>\n        ))}\n      </select>\n    </div>\n\n    {/* Middle column */}\n    <div style={{ display: \"flex\", justifyContent: \"center\", alignItems: \"center\" }}>\n      {video && exercise && (\n        <SecureVideoPlayer exercise={exercise} video={video} />\n      )}\n    </div>\n\n    {/* Right column */}\n    <div style={{ overflowY: \"auto\" , padding: \"0 10px\" }}>\n      <h3>Labels:</h3>\n\n       <p>\n          Taking into account the description and aim of the exercise and observing the\n          whole exercise (all repetitions), please answer the questions choosing one of the\n          following options:\n          <br />\n          1 = Never &nbsp; 2 = Rarely &nbsp; 3 = Sometimes &nbsp; 4 = Often &nbsp; 5 = Always\n          </p>\n\n      {labelNames.map((label, idx) => (\n        <div key={idx} style={{ marginBottom: \"1rem\" }}>\n          <p className=\"question-text\" >\n            {label.name}: {label.question}\n          </p>\n          <input\n            type=\"range\"\n            min=\"0\"\n            max=\"5\"\n            value={labels[idx] || 0}\n            onChange={(e) => handleLabelChange(idx, e.target.value)}\n          /> {labels[idx] || 0}\n        </div>\n      ))}\n      <button onClick={handleSubmit}>Save Annotation</button>\n    </div>\n\n  </div>\n  );\n}\n\nconst styles = {\n  container: {\n    height: \"100vh\",\n    display: \"grid\",\n    gridTemplateColumns: \"20% 40% 40%\", // Left, Middle, Right\n    gap: \"1rem\",\n    background: \"#e8efff\",\n    padding: \"3rem\",\n    fontSize: \"1.1rem\" // ⬅ sets base font size for everything\n  },\n  form: {\n    background: \"#fff\",\n    padding: \"2rem\",\n    borderRadius: \"10px\",\n    boxShadow: \"0 4px 20px rgba(0,0,0,0.1)\",\n    width: \"300px\",\n    display: \"flex\",\n    flexDirection: \"column\",\n  },\n  title: {\n    textAlign: \"center\",\n    marginBottom: \"1.5rem\",\n    color: \"#1f2937\",\n  },\n  label: {\n    marginBottom: \"0.25rem\",\n    color: \"#1f2937\",\n    fontWeight: \"500\",\n  },\n  input: {\n    marginBottom: \"1rem\",\n    padding: \"0.5rem\",\n    borderRadius: \"5px\",\n    border: \"1px solid #d1d5db\",\n    fontSize: \"1rem\",\n  },\n  button: {\n    background: \"#3b82f6\",\n    color: \"#fff\",\n    padding: \"0.75rem\",\n    border: \"none\",\n    borderRadius: \"5px\",\n    cursor: \"pointer\",\n    fontSize: \"1rem\",\n  },\n};\n\n\nexport default VideoAnnotator;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}