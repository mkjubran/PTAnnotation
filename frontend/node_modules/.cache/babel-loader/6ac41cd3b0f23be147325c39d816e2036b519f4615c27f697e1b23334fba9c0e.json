{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function VideoAnnotator(_ref){let{user}=_ref;const[exercises,setExercises]=useState([]);const[exercise,setExercise]=useState(\"\");const[videos,setVideos]=useState([]);const[video,setVideo]=useState(\"\");const[labels,setLabels]=useState(Array(10).fill(5));useEffect(()=>{axios.get(\"http://localhost:5000/exercises\").then(res=>{setExercises(res.data);});},[]);useEffect(()=>{if(exercise){axios.get(\"http://localhost:5000/videos/\".concat(exercise)).then(res=>{setVideos(res.data);setVideo(res.data[0]||\"\");});}},[exercise]);const handleLabelChange=(idx,val)=>{const newLabels=[...labels];newLabels[idx]=Number(val);setLabels(newLabels);};const handleSubmit=()=>{axios.post(\"http://localhost:5000/annotations\",{exercise,video,user,labels}).then(()=>alert(\"Annotation saved!\"));};return/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",padding:\"2rem\"},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Exercise:\"}),/*#__PURE__*/_jsxs(\"select\",{onChange:e=>setExercise(e.target.value),value:exercise,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select exercise\"}),exercises.map(ex=>/*#__PURE__*/_jsx(\"option\",{value:ex,children:ex},ex))]}),/*#__PURE__*/_jsx(\"h3\",{children:\"Video:\"}),/*#__PURE__*/_jsx(\"select\",{onChange:e=>setVideo(e.target.value),value:video,children:videos.map(v=>/*#__PURE__*/_jsx(\"option\",{value:v,children:v},v))}),/*#__PURE__*/_jsx(\"h3\",{children:\"Labels:\"}),labels.map((val,idx)=>/*#__PURE__*/_jsxs(\"div\",{children:[\"Q\",idx+1,\":\",/*#__PURE__*/_jsx(\"input\",{type:\"range\",min:\"0\",max:\"10\",value:val,onChange:e=>handleLabelChange(idx,e.target.value)}),\" \",val]},idx)),/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,children:\"Save Annotation\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{marginLeft:\"2rem\"},children:video&&exercise&&/*#__PURE__*/_jsx(\"video\",{width:\"600\",controls:true,src:\"http://localhost:5000/videos/\".concat(exercise,\"/\").concat(video)},video)})]});}export default VideoAnnotator;","map":{"version":3,"names":["React","useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","VideoAnnotator","_ref","user","exercises","setExercises","exercise","setExercise","videos","setVideos","video","setVideo","labels","setLabels","Array","fill","get","then","res","data","concat","handleLabelChange","idx","val","newLabels","Number","handleSubmit","post","alert","style","display","padding","children","onChange","e","target","value","map","ex","v","type","min","max","onClick","marginLeft","width","controls","src"],"sources":["/AIARUPD/DataAnnotationApp/pt-annotation-app/frontend/src/components/VideoAnnotator.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\n\nfunction VideoAnnotator({ user }) {\n  const [exercises, setExercises] = useState([]);\n  const [exercise, setExercise] = useState(\"\");\n  const [videos, setVideos] = useState([]);\n  const [video, setVideo] = useState(\"\");\n  const [labels, setLabels] = useState(Array(10).fill(5));\n\n  useEffect(() => {\n    axios.get(\"http://localhost:5000/exercises\").then((res) => {\n      setExercises(res.data);\n    });\n  }, []);\n\n  useEffect(() => {\n    if (exercise) {\n      axios.get(`http://localhost:5000/videos/${exercise}`).then((res) => {\n        setVideos(res.data);\n        setVideo(res.data[0] || \"\");\n      });\n    }\n  }, [exercise]);\n\n  const handleLabelChange = (idx, val) => {\n    const newLabels = [...labels];\n    newLabels[idx] = Number(val);\n    setLabels(newLabels);\n  };\n\n  const handleSubmit = () => {\n    axios.post(\"http://localhost:5000/annotations\", {\n      exercise,\n      video,\n      user,\n      labels\n    }).then(() => alert(\"Annotation saved!\"));\n  };\n\n  return (\n    <div style={{ display: \"flex\", padding: \"2rem\" }}>\n      <div>\n        <h3>Exercise:</h3>\n        <select onChange={(e) => setExercise(e.target.value)} value={exercise}>\n          <option value=\"\">Select exercise</option>\n          {exercises.map((ex) => (\n            <option key={ex} value={ex}>{ex}</option>\n          ))}\n        </select>\n\n        <h3>Video:</h3>\n        <select onChange={(e) => setVideo(e.target.value)} value={video}>\n          {videos.map((v) => (\n            <option key={v} value={v}>{v}</option>\n          ))}\n        </select>\n\n        <h3>Labels:</h3>\n        {labels.map((val, idx) => (\n          <div key={idx}>\n            Q{idx + 1}: \n            <input\n              type=\"range\"\n              min=\"0\"\n              max=\"10\"\n              value={val}\n              onChange={(e) => handleLabelChange(idx, e.target.value)}\n            /> {val}\n          </div>\n        ))}\n\n        <button onClick={handleSubmit}>Save Annotation</button>\n      </div>\n\n      <div style={{ marginLeft: \"2rem\" }}>\n        {video && exercise && (\n          <video\n            key={video}\n            width=\"600\"\n            controls\n            src={`http://localhost:5000/videos/${exercise}/${video}`}\n          />\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default VideoAnnotator;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}