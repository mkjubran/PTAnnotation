{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import axios from'axios';import SecureVideoPlayer from\"./SecureVideoPlayer\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function VideoAnnotator(_ref){let{user}=_ref;const[exercises,setExercises]=useState([]);const[exercise,setExercise]=useState(\"\");const[videos,setVideos]=useState([]);const[video,setVideo]=useState(\"\");const[labels,setLabels]=useState(Array(10).fill(5));useEffect(()=>{axios.get(\"/api/annotations\").then(res=>{// The keys are \"E0\", \"E1\", etc.\nsetExercises(Object.keys(res.data));});},[]);useEffect(()=>{if(exercise){axios.get(\"/api/videos/\".concat(exercise)).then(res=>{setVideos(res.data);setVideo(res.data[0]||\"\");});}},[exercise]);const handleLabelChange=(idx,val)=>{const newLabels=[...labels];newLabels[idx]=Number(val);setLabels(newLabels);};const handleSubmit=()=>{axios.post(\"http://pt-backend:5000/annotations\",{exercise,video,user,labels}).then(()=>alert(\"Annotation saved!\"));};return/*#__PURE__*/_jsxs(\"div\",{style:styles.container,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Exercise:\"}),/*#__PURE__*/_jsxs(\"select\",{onChange:e=>setExercise(e.target.value),value:exercise,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select exercise\"}),exercises.map(ex=>/*#__PURE__*/_jsx(\"option\",{value:ex,children:ex},ex))]}),/*#__PURE__*/_jsx(\"h3\",{children:\"Video:\"}),/*#__PURE__*/_jsx(\"select\",{onChange:e=>setVideo(e.target.value),value:video,children:videos.map(v=>/*#__PURE__*/_jsx(\"option\",{value:v,children:v},v))}),/*#__PURE__*/_jsx(\"h3\",{children:\"Labels:\"}),labels.map((val,idx)=>/*#__PURE__*/_jsxs(\"div\",{children:[\"Q\",idx+1,\":\",/*#__PURE__*/_jsx(\"input\",{type:\"range\",min:\"0\",max:\"10\",value:val,onChange:e=>handleLabelChange(idx,e.target.value)}),\" \",val]},idx)),/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,children:\"Save Annotation\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{marginLeft:\"2rem\"},children:video&&exercise&&/*#__PURE__*/_jsx(SecureVideoPlayer,{exercise:exercise,video:video})})]});}const styles={container:{height:\"100vh\",display:\"flex\",justifyContent:\"center\",alignItems:\"center\",background:\"#e8efff\"},form:{background:\"#fff\",padding:\"2rem\",borderRadius:\"10px\",boxShadow:\"0 4px 20px rgba(0,0,0,0.1)\",width:\"300px\",display:\"flex\",flexDirection:\"column\"},title:{textAlign:\"center\",marginBottom:\"1.5rem\",color:\"#1f2937\"},label:{marginBottom:\"0.25rem\",color:\"#1f2937\",fontWeight:\"500\"},input:{marginBottom:\"1rem\",padding:\"0.5rem\",borderRadius:\"5px\",border:\"1px solid #d1d5db\",fontSize:\"1rem\"},button:{background:\"#3b82f6\",color:\"#fff\",padding:\"0.75rem\",border:\"none\",borderRadius:\"5px\",cursor:\"pointer\",fontSize:\"1rem\"}};export default VideoAnnotator;","map":{"version":3,"names":["React","useEffect","useState","axios","SecureVideoPlayer","jsx","_jsx","jsxs","_jsxs","VideoAnnotator","_ref","user","exercises","setExercises","exercise","setExercise","videos","setVideos","video","setVideo","labels","setLabels","Array","fill","get","then","res","Object","keys","data","concat","handleLabelChange","idx","val","newLabels","Number","handleSubmit","post","alert","style","styles","container","children","onChange","e","target","value","map","ex","v","type","min","max","onClick","marginLeft","height","display","justifyContent","alignItems","background","form","padding","borderRadius","boxShadow","width","flexDirection","title","textAlign","marginBottom","color","label","fontWeight","input","border","fontSize","button","cursor"],"sources":["/AIARUPD/DataAnnotationApp/pt-annotation-app/frontend/src/components/VideoAnnotator.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport axios from 'axios';\nimport SecureVideoPlayer from \"./SecureVideoPlayer\";\n\nfunction VideoAnnotator({ user }) {\n  const [exercises, setExercises] = useState([]);\n  const [exercise, setExercise] = useState(\"\");\n  const [videos, setVideos] = useState([]);\n  const [video, setVideo] = useState(\"\");\n  const [labels, setLabels] = useState(Array(10).fill(5));\n\n  useEffect(() => {\n    axios.get(\"/api/annotations\").then((res) => {\n      // The keys are \"E0\", \"E1\", etc.\n      setExercises(Object.keys(res.data));\n    });\n  }, []);\n\n  useEffect(() => {\n    if (exercise) {\n      axios.get(`/api/videos/${exercise}`).then((res) => {\n        setVideos(res.data);\n        setVideo(res.data[0] || \"\");\n      });\n   }\n  }, [exercise]);\n\n  const handleLabelChange = (idx, val) => {\n    const newLabels = [...labels];\n    newLabels[idx] = Number(val);\n    setLabels(newLabels);\n  };\n\n  const handleSubmit = () => {\n    axios.post(\"http://pt-backend:5000/annotations\", {\n      exercise,\n      video,\n      user,\n      labels\n    }).then(() => alert(\"Annotation saved!\"));\n  };\n\n  return (\n    <div style={styles.container}>\n      <div>\n        <h3>Exercise:</h3>\n        <select onChange={(e) => setExercise(e.target.value)} value={exercise}>\n          <option value=\"\">Select exercise</option>\n          {exercises.map((ex) => (\n            <option key={ex} value={ex}>{ex}</option>\n          ))}\n        </select>\n        <h3>Video:</h3>\n        <select onChange={(e) => setVideo(e.target.value)} value={video}>\n          {videos.map((v) => (\n            <option key={v} value={v}>{v}</option>\n          ))}\n        </select>\n\n        <h3>Labels:</h3>\n        {labels.map((val, idx) => (\n          <div key={idx}>\n            Q{idx + 1}:\n            <input\n              type=\"range\"\n              min=\"0\"\n              max=\"10\"\n              value={val}\n              onChange={(e) => handleLabelChange(idx, e.target.value)}\n            /> {val}\n          </div>\n        ))}\n\n        <button onClick={handleSubmit}>Save Annotation</button>\n      </div>\n      <div style={{ marginLeft: \"2rem\" }}>\n  {/* Old video player commented out\n        {video && exercise && (\n          <video\n            key={video}\n            width=\"600\"\n            controls\n            src={`/api/videos/${exercise}/${video}`}\n            onContextMenu={(e) => e.preventDefault()}\n          />\n  */}\n          {video && exercise && (\n            <SecureVideoPlayer exercise={exercise} video={video} />\n          )}\n\n      </div>\n    </div>\n  );\n}\n\nconst styles = {\n  container: {\n    height: \"100vh\",\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    background: \"#e8efff\"\n  },\n  form: {\n    background: \"#fff\",\n    padding: \"2rem\",\n    borderRadius: \"10px\",\n    boxShadow: \"0 4px 20px rgba(0,0,0,0.1)\",\n    width: \"300px\",\n    display: \"flex\",\n    flexDirection: \"column\",\n  },\n  title: {\n    textAlign: \"center\",\n    marginBottom: \"1.5rem\",\n    color: \"#1f2937\",\n  },\n  label: {\n    marginBottom: \"0.25rem\",\n    color: \"#1f2937\",\n    fontWeight: \"500\",\n  },\n  input: {\n    marginBottom: \"1rem\",\n    padding: \"0.5rem\",\n    borderRadius: \"5px\",\n    border: \"1px solid #d1d5db\",\n    fontSize: \"1rem\",\n  },\n  button: {\n    background: \"#3b82f6\",\n    color: \"#fff\",\n    padding: \"0.75rem\",\n    border: \"none\",\n    borderRadius: \"5px\",\n    cursor: \"pointer\",\n    fontSize: \"1rem\",\n  },\n};\n\n\nexport default VideoAnnotator;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}