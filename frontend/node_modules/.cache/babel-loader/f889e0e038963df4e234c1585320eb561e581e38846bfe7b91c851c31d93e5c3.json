{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import axios from'axios';import SecureVideoPlayer from\"./SecureVideoPlayer\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function VideoAnnotator(_ref){let{user}=_ref;const[exercises,setExercises]=useState([]);const[exercise,setExercise]=useState(\"\");const[videos,setVideos]=useState([]);const[video,setVideo]=useState(\"\");const[labelNames,setLabelNames]=useState([]);// Q1–Q10 from DB\nconst[labels,setLabels]=useState([]);// user-selected values\nuseEffect(()=>{axios.get(\"/api/annotations\").then(res=>{// The keys are \"E0\", \"E1\", etc.\nsetExercises(Object.keys(res.data));});},[]);useEffect(()=>{if(exercise){axios.get(\"/api/videos/\".concat(exercise)).then(res=>{setVideos(res.data);setVideo(res.data[0]||\"\");});}},[exercise]);// Fetch label names from DB\nuseEffect(()=>{axios.get(\"/api/labels\").then(res=>{setLabelNames(res.data);setLabels(new Array(res.data.length).fill(5));// Default values\n});},[]);const handleLabelChange=(idx,val)=>{const newLabels=[...labels];newLabels[idx]=Number(val);setLabels(newLabels);};const handleSubmit=()=>{axios.post(\"http://pt-backend:5000/annotations\",{exercise,video,user,labels}).then(()=>alert(\"Annotation saved!\"));};return/*#__PURE__*/_jsxs(\"div\",{style:styles.container,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Exercise:\"}),/*#__PURE__*/_jsxs(\"select\",{onChange:e=>setExercise(e.target.value),value:exercise,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select exercise\"}),exercises.map(ex=>/*#__PURE__*/_jsx(\"option\",{value:ex,children:ex},ex))]}),/*#__PURE__*/_jsx(\"h3\",{children:\"Video:\"}),/*#__PURE__*/_jsx(\"select\",{onChange:e=>setVideo(e.target.value),value:video,children:videos.map(v=>/*#__PURE__*/_jsx(\"option\",{value:v,children:v},v))}),/*#__PURE__*/_jsx(\"h3\",{children:\"Labels:\"}),labelNames.map((label,idx)=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[label.name,\": \",label.question]}),/*#__PURE__*/_jsx(\"input\",{type:\"range\",min:\"0\",max:\"10\",value:labels[idx]||0,onChange:e=>handleLabelChange(idx,e.target.value)}),\" \",labels[idx]||0]},idx)),/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,children:\"Save Annotation\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{marginLeft:\"2rem\"},children:video&&exercise&&/*#__PURE__*/_jsx(SecureVideoPlayer,{exercise:exercise,video:video})})]});}const styles={container:{height:\"100vh\",display:\"flex\",justifyContent:\"center\",alignItems:\"center\",background:\"#e8efff\"},form:{background:\"#fff\",padding:\"2rem\",borderRadius:\"10px\",boxShadow:\"0 4px 20px rgba(0,0,0,0.1)\",width:\"300px\",display:\"flex\",flexDirection:\"column\"},title:{textAlign:\"center\",marginBottom:\"1.5rem\",color:\"#1f2937\"},label:{marginBottom:\"0.25rem\",color:\"#1f2937\",fontWeight:\"500\"},input:{marginBottom:\"1rem\",padding:\"0.5rem\",borderRadius:\"5px\",border:\"1px solid #d1d5db\",fontSize:\"1rem\"},button:{background:\"#3b82f6\",color:\"#fff\",padding:\"0.75rem\",border:\"none\",borderRadius:\"5px\",cursor:\"pointer\",fontSize:\"1rem\"}};export default VideoAnnotator;","map":{"version":3,"names":["React","useEffect","useState","axios","SecureVideoPlayer","jsx","_jsx","jsxs","_jsxs","VideoAnnotator","_ref","user","exercises","setExercises","exercise","setExercise","videos","setVideos","video","setVideo","labelNames","setLabelNames","labels","setLabels","get","then","res","Object","keys","data","concat","Array","length","fill","handleLabelChange","idx","val","newLabels","Number","handleSubmit","post","alert","style","styles","container","children","onChange","e","target","value","map","ex","v","label","name","question","type","min","max","onClick","marginLeft","height","display","justifyContent","alignItems","background","form","padding","borderRadius","boxShadow","width","flexDirection","title","textAlign","marginBottom","color","fontWeight","input","border","fontSize","button","cursor"],"sources":["/AIARUPD/DataAnnotationApp/pt-annotation-app/frontend/src/components/VideoAnnotator.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport axios from 'axios';\nimport SecureVideoPlayer from \"./SecureVideoPlayer\";\n\nfunction VideoAnnotator({ user }) {\n  const [exercises, setExercises] = useState([]);\n  const [exercise, setExercise] = useState(\"\");\n  const [videos, setVideos] = useState([]);\n  const [video, setVideo] = useState(\"\");\n  const [labelNames, setLabelNames] = useState([]); // Q1–Q10 from DB\n  const [labels, setLabels] = useState([]); // user-selected values\n\n  useEffect(() => {\n    axios.get(\"/api/annotations\").then((res) => {\n      // The keys are \"E0\", \"E1\", etc.\n      setExercises(Object.keys(res.data));\n    });\n  }, []);\n\n  useEffect(() => {\n    if (exercise) {\n      axios.get(`/api/videos/${exercise}`).then((res) => {\n        setVideos(res.data);\n        setVideo(res.data[0] || \"\");\n      });\n   }\n  }, [exercise]);\n\n  // Fetch label names from DB\n  useEffect(() => {\n    axios.get(\"/api/labels\").then((res) => {\n      setLabelNames(res.data);\n      setLabels(new Array(res.data.length).fill(5)); // Default values\n    });\n  }, []);\n\n  const handleLabelChange = (idx, val) => {\n    const newLabels = [...labels];\n    newLabels[idx] = Number(val);\n    setLabels(newLabels);\n  };\n\n  const handleSubmit = () => {\n    axios.post(\"http://pt-backend:5000/annotations\", {\n      exercise,\n      video,\n      user,\n      labels\n    }).then(() => alert(\"Annotation saved!\"));\n  };\n\n  return (\n    <div style={styles.container}>\n      <div>\n        <h3>Exercise:</h3>\n        <select onChange={(e) => setExercise(e.target.value)} value={exercise}>\n          <option value=\"\">Select exercise</option>\n          {exercises.map((ex) => (\n            <option key={ex} value={ex}>{ex}</option>\n          ))}\n        </select>\n        <h3>Video:</h3>\n        <select onChange={(e) => setVideo(e.target.value)} value={video}>\n          {videos.map((v) => (\n            <option key={v} value={v}>{v}</option>\n          ))}\n        </select>\n\n<h3>Labels:</h3>\n{labelNames.map((label, idx) => (\n  <div key={idx}>\n        <p>{label.name}: {label.question}</p>\n    <input\n      type=\"range\"\n      min=\"0\"\n      max=\"10\"\n      value={labels[idx] || 0}\n      onChange={(e) => handleLabelChange(idx, e.target.value)}\n    /> {labels[idx] || 0}\n  </div>\n))}\n        <button onClick={handleSubmit}>Save Annotation</button>\n      </div>\n      <div style={{ marginLeft: \"2rem\" }}>\n  {/* Old video player commented out\n        {video && exercise && (\n          <video\n            key={video}\n            width=\"600\"\n            controls\n            src={`/api/videos/${exercise}/${video}`}\n            onContextMenu={(e) => e.preventDefault()}\n          />\n  */}\n          {video && exercise && (\n            <SecureVideoPlayer exercise={exercise} video={video} />\n          )}\n\n      </div>\n    </div>\n  );\n}\n\nconst styles = {\n  container: {\n    height: \"100vh\",\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    background: \"#e8efff\"\n  },\n  form: {\n    background: \"#fff\",\n    padding: \"2rem\",\n    borderRadius: \"10px\",\n    boxShadow: \"0 4px 20px rgba(0,0,0,0.1)\",\n    width: \"300px\",\n    display: \"flex\",\n    flexDirection: \"column\",\n  },\n  title: {\n    textAlign: \"center\",\n    marginBottom: \"1.5rem\",\n    color: \"#1f2937\",\n  },\n  label: {\n    marginBottom: \"0.25rem\",\n    color: \"#1f2937\",\n    fontWeight: \"500\",\n  },\n  input: {\n    marginBottom: \"1rem\",\n    padding: \"0.5rem\",\n    borderRadius: \"5px\",\n    border: \"1px solid #d1d5db\",\n    fontSize: \"1rem\",\n  },\n  button: {\n    background: \"#3b82f6\",\n    color: \"#fff\",\n    padding: \"0.75rem\",\n    border: \"none\",\n    borderRadius: \"5px\",\n    cursor: \"pointer\",\n    fontSize: \"1rem\",\n  },\n};\n\n\nexport default VideoAnnotator;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}